<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Historico de Caixa</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="menu.css">
  <link rel="stylesheet" href="componentes.css">
  <link rel="stylesheet" href="notifications.css">
  <link rel="stylesheet" href="historico.css">
</head>

<body>
  <header>
    <nav></nav>
  </header>

  <main class="main-content historico-content">
    <section class="hist-hero">
      <div>
        <p class="eyebrow">Visão do caixa</p>
        <h1>Histórico do caixa</h1>
        <p class="hero-lead">Acompanhe vendas, sangrias, suprimentos, devoluções e fechamentos em um único painel.</p>
      </div>
      <div class="hero-side">
        <div class="mini-card">
          <p class="label">Filtros rapidos</p>
          <small>Combine datas, vendedor e ordenação para encontrar registros sem esforo.</small>
        </div>
        <div class="mini-card">
          <p class="label">Exportação</p>
          <small>Baixe CSV direto do painel ativo para compartilhar ou auditar.</small>
        </div>
      </div>
    </section>

    <div class="history-wrapper">
      <div class="tabs">
        <button type="button" class="tab-button active" data-tab="vendas">Histórico de Vendas</button>
        <button type="button" class="tab-button" data-tab="sangrias">Histórico de Sangrias</button>
        <button type="button" class="tab-button" data-tab="suprimentos">Histórico de Suprimentos</button>
        <button type="button" class="tab-button" data-tab="devolucoes">Histórico de Devolucoes</button>
        <button type="button" class="tab-button" data-tab="fechamentos">Histórico de Fechamentos</button>
      </div>

      <section id="vendas" class="tab-content active history-card">
        <div class="card-head">
          <div>
            <p class="eyebrow">Vendas</p>
            <h2>Histórico de vendas</h2>
            <p class="section-subtitle">Use filtros para localizar uma venda especifica e exporte quando precisar.</p>
          </div>
        </div>
        <div class="filters">
          <select id="filtro-vendedor-vendas"></select>
          <input type="date" id="filtro-dia-vendas">
          <input type="date" id="filtro-dia-ate-vendas">
          <input type="text" id="filtro-produto-id" placeholder="Buscar por ID do Produto...">
          <input type="text" id="filtro-produto-nome" placeholder="Buscar por Nome do Produto...">
          <select id="filtro-ordem-vendas">
            <option value="date_desc" selected>Mais recentes</option>
            <option value="date_asc">Mais antigas</option>
            <option value="total_desc">Maior total</option>
            <option value="total_asc">Menor total</option>
          </select>
          <button id="limpar-filtros-vendas" type="button">Limpar</button>
          <button id="exportar-vendas-csv" type="button">Exportar CSV</button>
        </div>
        <div id="resumo-vendas" class="history-summary-bar"></div>
        <div id="historico-vendas-lista" class="history-list"></div>
      </section>

      <section id="sangrias" class="tab-content history-card">
        <div class="card-head">
          <div>
            <p class="eyebrow">Sangrias</p>
            <h2>Histórico de sangrias</h2>
            <p class="section-subtitle">Veja retiradas do caixa com filtros de período, usuário e ordenação.</p>
          </div>
        </div>
        <div class="filters">
          <select id="filtro-vendedor-sangrias"></select>
          <input type="date" id="filtro-dia-sangrias">
          <input type="date" id="filtro-dia-ate-sangrias">
          <select id="ordem-sangrias">
            <option value="date_desc" selected>Mais recentes</option>
            <option value="date_asc">Mais antigas</option>
            <option value="amount_desc">Maior valor</option>
            <option value="amount_asc">Menor valor</option>
          </select>
          <button id="limpar-filtros-sangrias" type="button">Limpar</button>
          <button id="exportar-sangrias-csv" type="button">Exportar CSV</button>
        </div>
        <div id="resumo-sangrias" class="history-summary-bar"></div>
        <div id="historico-sangrias-lista" class="history-list"></div>
      </section>

      <section id="suprimentos" class="tab-content history-card">
        <div class="card-head">
          <div>
            <p class="eyebrow">Suprimentos</p>
            <h2>Histórico de suprimentos</h2>
            <p class="section-subtitle">Monitore entradas no caixa e mantenha o registro claro para auditoria.</p>
          </div>
        </div>
        <div class="filters">
          <select id="filtro-vendedor-suprimentos"></select>
          <input type="date" id="filtro-dia-suprimentos">
          <input type="date" id="filtro-dia-ate-suprimentos">
          <select id="ordem-suprimentos">
            <option value="date_desc" selected>Mais recentes</option>
            <option value="date_asc">Mais antigas</option>
            <option value="amount_desc">Maior valor</option>
            <option value="amount_asc">Menor valor</option>
          </select>
          <button id="limpar-filtros-suprimentos" type="button">Limpar</button>
          <button id="exportar-suprimentos-csv" type="button">Exportar CSV</button>
        </div>
        <div id="resumo-suprimentos" class="history-summary-bar"></div>
        <div id="historico-suprimentos-lista" class="history-list"></div>
      </section>

      <section id="devolucoes" class="tab-content history-card">
        <div class="card-head">
          <div>
            <p class="eyebrow">Devoluções</p>
            <h2>Histórico de devoluções</h2>
            <p class="section-subtitle">Controle itens devolvidos e processe ajustes com clareza.</p>
          </div>
        </div>
        <div class="filters">
          <select id="filtro-vendedor-devolucoes"></select>
          <input type="date" id="filtro-dia-devolucoes">
          <input type="date" id="filtro-dia-ate-devolucoes">
          <input type="text" id="filtro-produto-id-devolucao" placeholder="Buscar por ID do Produto...">
          <input type="text" id="filtro-produto-nome-devolucao" placeholder="Buscar por Nome do Produto...">
          <select id="ordem-devolucoes">
            <option value="date_desc" selected>Mais recentes</option>
            <option value="date_asc">Mais antigas</option>
            <option value="amount_desc">Maior total</option>
            <option value="amount_asc">Menor total</option>
          </select>
          <button id="limpar-filtros-devolucoes" type="button">Limpar</button>
          <button id="exportar-devolucoes-csv" type="button">Exportar CSV</button>
        </div>
        <div id="resumo-devolucoes" class="history-summary-bar"></div>
        <div id="historico-devolucoes-lista" class="history-list"></div>
      </section>

      <section id="fechamentos" class="tab-content history-card">
        <div class="card-head">
          <div>
            <p class="eyebrow">Fechamentos</p>
            <h2>Histórico de fechamentos</h2>
            <p class="section-subtitle">Veja o consolidado de turnos e garanta conciliação rapida.</p>
          </div>
        </div>
        <div class="filters">
          <input type="date" id="filtro-dia-fechamento">
          <input type="date" id="filtro-dia-ate-fechamento">
          <input type="text" id="filtro-usuario-fechamento" placeholder="Buscar por usuario...">
          <button id="limpar-filtros-fechamentos" type="button">Limpar</button>
          <button id="exportar-fechamentos-csv" type="button">Exportar CSV</button>
        </div>
        <div id="resumo-fechamentos" class="history-summary-bar"></div>
        <div id="historico-fechamentos-lista" class="history-list"></div>
      </section>
    </div>
  </main>

  <script src="api-client.js"></script>
  <script src="notifications.js"></script>
  <script src="auth.js"></script>
  <script src="historico.js"></script>

  <div id="modal-devolucao" class="modal">
    <div class="modal-content">
      <div class="modal-head">
        <div>
          <p class="eyebrow">Devolução</p>
          <h2>Processar devolução</h2>
        </div>
        <button type="button" id="fechar-modal-devolucao" class="modal-close" aria-label="Fechar modal">x</button>
      </div>
      <p class="modal-subtitle">Venda ID: <strong id="dev-sale-id">-</strong></p>
      <div id="dev-items" class="modal-items"></div>
      <label for="dev-motivo" class="modal-label">Motivo</label>
      <textarea id="dev-motivo" rows="3" class="modal-textarea" placeholder="Descreva o motivo da devolucao"></textarea>
      <div class="modal-actions">
        <button type="button" id="cancelar-devolucao" class="btn-secondary">Cancelar</button>
        <button type="button" id="confirmar-devolucao" class="btn-primary">Confirmar</button>
      </div>
    </div>
  </div>
</body>

</html>